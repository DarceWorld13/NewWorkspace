package test.pizza;


import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;

import Dao.PizzaDao;
import Dao.PizzamemDao;
import fr.pizzeria.model.Pizza.Categorie;
import fr.pizzeria.model.Pizza.Pizza;

public class TestPizzaMemDao {
	
	private PizzaDao dao; 
	
	@Before
	public void init() {
			this.dao = new PizzamemDao(); 
	}
	
	
	@Test
	public void  testFindAllPizza() {
		
		Pizza[] actual = dao.findAllPizzas();
		//Pizza[] expected = new Pizza[20];
		
		Assert.assertEquals(9, actual.length);;
		
	}
	
	@Test
	public void  testSaveNewPizza() {
		
		
		Pizza nvpizza = new Pizza("TES", "testeAjout", 12.65, Categorie.AVEC_VIANDE); 
		
		dao.saveNewPizza(nvpizza);
		
		Pizza[] actuel = dao.findAllPizzas(); 
		
		Pizza[] expected = {
		
		 new Pizza(0, "PEP", "pépéronni", 12.5, Categorie.AVEC_VIANDE),
		 new Pizza(1, "MAR", "magherita", 14.00, Categorie.SANS_VIANDE),
		 new Pizza(2, "REI", "reine", 11.5, Categorie.AVEC_VIANDE),
		 new Pizza(3, "FRO", "4 fromages", 12.00, Categorie.SANS_VIANDE),
		 new Pizza(4, "CAN", "cannibale", 10.5, Categorie.AVEC_VIANDE), 
		 new Pizza(5, "SAV", "savoyarde", 15.5, Categorie.AVEC_VIANDE),
		 new Pizza(6, "ORI", "orientale", 14.00, Categorie.AVEC_VIANDE),
		 new Pizza(7, "IND", "indienne", 12.3, Categorie.AVEC_VIANDE), 
		 new Pizza(8, "TES", "testeAjout", 12.65, Categorie.AVEC_VIANDE)
		
		}; 
		
		Assert.assertArrayEquals(expected, actuel);
		
	}
	
	
	@Test
	public void TestupdatePizza() {
		
		Pizza updated = new Pizza(1, "TES", "testUpdate", 14.5, Categorie.SANS_VIANDE);
		
		dao.updatePizza("MAR", updated );
		
		boolean pizzatrouve = false; 
		
		Pizza[] actuel = dao.findAllPizzas(); 
		
		for (Pizza pizza : actuel) {
			
			if(pizza.getCode() != "MAR") {
				
				pizzatrouve = true; 
			}
			
		}
		
		
		
	}
	
	
	

}
